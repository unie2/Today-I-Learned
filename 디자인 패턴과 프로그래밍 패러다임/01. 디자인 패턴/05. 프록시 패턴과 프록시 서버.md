## ✔ 프록시 패턴 (Proxy Pattern)
  - 대상 객체(Subject)에 접근하기 전 그 접근에 대한 흐름을 가로채 대상 객체 앞단의 인터페이스 역할을 하는 디자인 패턴
  - 이를 통해 객체의 속성, 변환 등을 보완하며 보안, 데이터 검증, 캐싱, 로깅에 사용한다.
  - 이는 프록시 객체로 쓰이기도 하지만 프록시 서버로도 활용된다.
  ```
  프록시 서버에서의 캐싱
    - 캐시 안에 정보를 담아두고, 캐시 안에 있는 정보를 요구하는 요청에 대해 다시 저 멀리 있는 우너격 서버에 요청하지 않고 캐시 안에 있는 데이터를 활용하는 것
    - 이를 통해 불필요하게 외부와 연결하지 않기 때문에 트래픽을 줄일 수 있다는 장점이 있다.
  ```

- - -
## ✔ 프록시 서버 (Proxy Server)
  - 서버와 클라이언트 사이에서 클라이언트가 자신을 통해 다른 네트워크 서비스에 간접적으로 접속할 수 있게 해주는 컴퓨터 시스템이나 응용 프로그램

- - -
### 1. 프록시 서버로 쓰는 nginx
  - `nginx` : 비동기 이벤트 기반의 구조와 다수의 연결을 효과적으로 처리 가능한 웹 서버
  - 주로 Node.js 서버 앞단의 프록시 서버로 활용된다.
  - Node.js 서버를 구축할 때 앞단에 nginx를 두면 익명 사용자의 직접적인 서버로의 접근을 차단하고 간접적으로 한 단계를 더 거침으로써 보안성을 더욱 강화할 수 있다.
  ![nginx](https://user-images.githubusercontent.com/54324782/177686458-7112f2f2-1e42-4944-8723-eb112609e070.png) ([이미지 출처](https://interconnection.tistory.com/27))
  - nginx를 프록시 서버로 둬서 실제 포트를 숨길 수 있고 정적 자원을 gzip 압축하거나, 메인 서버 앞단에서의 로깅을 할 수도 있다.
  ```
  버퍼 오버플로우
    - 버퍼는 보통 데이터가 저장되는 메모리 공간으로, 메모리 공간을 벗어나는 경우를 말한다.
    - 이때 사용되지 않아야 할 영역에 데이터가 덮어씌워져 주소, 값을 바꾸는 공격이 발생하기도 한다.
  
  gzip 압축
    - LZ77과 Huffman 코딩의 조합인 DEFLATE 알고리즘을 기반으로 한 압축 기술
    - gzip 압축을 하면 데이터 전송량을 줄일 수 있지만, 압축을 해제했을 때 서버에서의 CPU 오버헤드도 생각해서 gzip 압축 사용 유무를 결정해야 한다.
  ```

- - -
### 2. 프록시 서버로 쓰는 CloudFlare
  - 전 세계적으로 분산된 서버가 있고 이를 통해 어떠한 시스템의 콘텐츠 전달을 빠르게 할 수 있는 CDN 서비스
  ```
  CDN (Content Delivery Network)
    - 각 사용자가 인터넷에 접속하는 곳과 가까운 곳에서 콘텐츠를 캐싱 또는 배포하는 서버 네트워크
    - 이를 통해 사용자가 웹 서버로부터 콘텐츠를 다운로드하는 시간을 줄일 수 있다.
  ```
  - CDN 이 외에도 `DDOS 공격 방어`, `HTTPS 구축`의 이점이 있다.
  - 이 모든 것은 웹 서버 앞단에 두어 `프록시 서버`로 쓰기 때문에 가능한 것
  ![cloudflare](https://user-images.githubusercontent.com/54324782/177687396-19292ddb-1a68-483e-8a87-923a0694eeb0.png) ([이미지 출처](https://www.troyhunt.com/get-started-with-cloudflare-security-on/))
  - 사용자, 클로러, 공격자가 자신의 웹 사이트에 접속할 때 CloudFlare를 통해 공격자로부터 보호할 수 있다.

#### DDOS 공격 방어
```
DDOS : 짧은 기간 동안 네트워크에 많은 요청을 보내 네트워크를 마비시켜 웹 사이트의 가용성을 방해하는 사이버 공격 유형
```
- CloudFlare는 의심스러운 트래픽, 특히 사용자가 접속하는 것이 아닌 시스템을 통해 오는 트래픽을 자동으로 차단해서 DDOS 공격으로부터 보호한다.
- CloudFlare의 거대한 네트워크 용량과 캐싱 전략으로 소규모 DDOS 공격은 쉽게 막아낼 수 있으며 이러한 공격에 대한 방화벽 대시보드도 제공한다.

#### HTTPS 구축
- 서버에서 HTTPS를 구축할 때 인증서를 기반으로 구축할 수 있다.
- 하지만 CloudFlare를 사용하면 별도의 인증서 설치 없이 좀 더 손쉽게 HTTPS를 구축할 수 있다.

#### CORS와 프런트엔드 프록시 서버
```
CORS (Cross-Origin Resource Sharing)
  - 서버가 웹 브라우저에서 리소스를 로드할 때 다른 오리진을 통해 로드하지 못하게 하는 HTTP 헤더 기반 메커니즘

Origin
  - 프로토콜과 호스트 이름, 포트의 조합
  - ex) https://kundol.com:12010/test 라는 주소에서 origin은 https://kundol.com:12010 을 뜻한다.
```
- 프런트엔드 개발 시 프런트엔드 서버를 만들어서 백엔드 서버와 통신할 때 주로 CORS 에러를 마주치는데,  
  이를 해결하기 위해 프런트엔드에서 프록시 서버를 만들기도 한다.
```
프런트엔드 - 127.0.0.1:3000      백엔드 - 127.0.0.1:12010
===> 포트 번호가 다르기 때문에 CORS 에러 발생
===> 프록시 서버를 둬서 프런트엔드 서버에서 요청되는 오리진을 127.0.0.1:12010으로 변경

+참고 : 127.0.0.1 이란 루프백 IP로, 본인 PC의 IP를 뜻한다.
        localhost나 127.0.0.1을 입력하면 DNS를 타지 않고 바로 본인 PC로 연결된다.
```
